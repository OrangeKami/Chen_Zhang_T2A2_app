<section class="py-5 text-center container shadow-sm">
 <div class="row gutters-sm">
    <%= render "layouts/shared/user_card" %>

  <div class="col-md-8">
    <div class="card mb-3">
      <div class="card-body">
        <section class="form-auth text-center">
          <h1 class="h3 mb-3 font-weight-normal">Listing</h1>
          <%= form_with(model: listing) do |form| %>
            <% if listing.errors.any? %>
              <div style="color: red">
                <h2><%= pluralize(listing.errors.count, "error") %> prohibited this listing from being saved:</h2>

                <ul>
                  <% listing.errors.each do |error| %>
                    <li><%= error.full_message %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>

        
            <%= form.label :name %>
            <%= form.text_field :name, autofocus: true, class: "form-control", placeholder: "Name..."%>
            <br>


            <%= form.label :price %>
            <%= form.number_field :price, step: :any, autofocus: true, class: "form-control", placeholder: "Price..." %>
            <br>

            <%# Action Text not working Rails 7 %>
            <%= form.label :description %>
            <%= form.text_area :description, autofocus: true, class: "form-control rows", rows: "5", placeholder: "Description..."%>
            <br>

            <%= form.label :category %>
            <%= form.select :category, [ 'Plants', 'Pots', 'Accessories'], :prompt => 'Select One', class: "form-control"%>
            <br><br>

            <%= form.label :"Photo" %>
            <%= form.file_field :photo, class: "form-control" %><br>

            <div class="actions">
              <%= form.submit "Update",class: "btn btn-outline-success "%>
            </div>
            <br> 
          <% end %>
          
          <div class="<%= 'd-none' if current_page?(new_listing_path) %>" >
              <%= button_to "Delete this listing", @listing, method: :delete, data: { confirm: "Are you sure?" },class: "btn btn-outline-danger"  %>
            <%# warning not working %>
          </div>
        </section>
      </div>         
    </div>        
  </div>
</section>


